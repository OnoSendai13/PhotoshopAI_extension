<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extension Photoshop IA - Guide Complet avec Arborescence</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            border-radius: 8px;
            padding: 20px;
            margin: 16px 0;
            overflow-x: auto;
            font-size: 13px;
            line-height: 1.5;
        }
        .folder-tree {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 16px 0;
            font-size: 14px;
            line-height: 1.6;
        }
        .highlight-path {
            background: #fff3cd;
            padding: 2px 4px;
            border-radius: 4px;
            font-family: monospace;
        }
        .step-box {
            border-left: 4px solid #3b82f6;
            background: #eff6ff;
            padding: 16px;
            margin: 16px 0;
            border-radius: 0 8px 8px 0;
        }
        .warning-box {
            border-left: 4px solid #f59e0b;
            background: #fffbeb;
            padding: 16px;
            margin: 16px 0;
            border-radius: 0 8px 8px 0;
        }
        .success-box {
            border-left: 4px solid #10b981;
            background: #ecfdf5;
            padding: 16px;
            margin: 16px 0;
            border-radius: 0 8px 8px 0;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">
    
    <div class="max-w-5xl mx-auto p-6">
        <!-- Header -->
        <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-8 rounded-lg mb-8">
            <h1 class="text-4xl font-bold mb-4">
                <i class="fas fa-magic mr-4"></i>Extension Photoshop IA
            </h1>
            <p class="text-xl opacity-90">Guide complet pour intégrer l'Intelligence Artificielle dans Photoshop</p>
            <div class="mt-4 flex flex-wrap gap-2">
                <span class="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm">CEP Extension</span>
                <span class="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm">OpenRouter API</span>
                <span class="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm">Google Gemini</span>
                <span class="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm">JSX</span>
            </div>
        </div>

        <!-- Introduction -->
        <div class="bg-white rounded-lg shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                <i class="fas fa-info-circle text-blue-500 mr-2"></i>À propos de cette extension
            </h2>
            <p class="text-gray-600 mb-4">
                Cette extension CEP pour Photoshop vous permet d'utiliser l'intelligence artificielle pour analyser et retoucher vos images directement dans Photoshop. Elle supporte les APIs OpenRouter et Google Gemini 2.5 Flash.
            </p>
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-semibold text-gray-800 mb-2">✨ Fonctionnalités</h3>
                    <ul class="text-gray-600 space-y-1">
                        <li>• Analyse intelligente des images</li>
                        <li>• Détection automatique d'objets</li>
                        <li>• Suggestions de retouche IA</li>
                        <li>• Interface moderne et intuitive</li>
                        <li>• Support multi-API</li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-800 mb-2">🔧 Prérequis</h3>
                    <ul class="text-gray-600 space-y-1">
                        <li>• Adobe Photoshop CC 2015+</li>
                        <li>• Windows 10+ ou macOS 10.14+</li>
                        <li>• Connexion Internet</li>
                        <li>• Clé API OpenRouter ou Google</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Arborescence -->
        <div class="bg-white rounded-lg shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                <i class="fas fa-folder-tree text-green-500 mr-2"></i>Structure des dossiers
            </h2>
            
            <div class="warning-box">
                <div class="flex items-center mb-2">
                    <i class="fas fa-exclamation-triangle text-amber-500 mr-2"></i>
                    <strong>Chemin d'installation important</strong>
                </div>
                <p>L'extension doit être placée dans le dossier CEP de Photoshop. Voici les chemins selon votre système :</p>
                <div class="mt-3 space-y-2">
                    <div><strong>Windows :</strong> <span class="highlight-path">C:\Program Files (x86)\Common Files\Adobe\CEP\extensions\</span></div>
                    <div><strong>macOS :</strong> <span class="highlight-path">/Library/Application Support/Adobe/CEP/extensions/</span></div>
                </div>
            </div>

            <h3 class="text-lg font-semibold text-gray-800 mb-3 mt-6">Arborescence complète de l'extension :</h3>
            
            <div class="folder-tree">
📁 CEP/extensions/
└── 📁 PhotoshopAI/
    ├── 📄 CSXS/
    │   └── 📄 manifest.xml                 ← Configuration de l'extension
    ├── 📁 js/
    │   ├── 📄 CSInterface.js              ← Bibliothèque Adobe CEP
    │   ├── 📄 main.js                     ← Logique principale de l'interface
    │   └── 📄 photoshop.jsx               ← Script Photoshop (JSX)
    ├── 📁 css/
    │   └── 📄 style.css                   ← Styles de l'interface
    ├── 📁 icons/
    │   ├── 📄 icon-normal.png             ← Icône normale (23x23px)
    │   ├── 📄 icon-hover.png              ← Icône survol (23x23px)
    │   ├── 📄 icon-dark.png               ← Icône thème sombre (23x23px)
    │   └── 📄 icon-dark-hover.png         ← Icône survol sombre (23x23px)
    ├── 📄 index.html                      ← Interface principale
    ├── 📄 README.md                       ← Documentation
    └── 📄 .debug                          ← Fichier de debug (optionnel)
            </div>
        </div>

        <!-- Code des fichiers -->
        <div class="bg-white rounded-lg shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                <i class="fas fa-code text-purple-500 mr-2"></i>Code complet des fichiers
            </h2>

            <!-- Manifest -->
            <div class="mb-8">
                <h3 class="text-lg font-semibold text-gray-800 mb-3">
                    <i class="fas fa-file-code text-blue-500 mr-2"></i>CSXS/manifest.xml
                </h3>
                <div class="code-block">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ExtensionManifest Version="7.0" ExtensionBundleId="com.photoshop.ai.extension"
    ExtensionBundleVersion="1.0.0" ExtensionBundleName="PhotoshopAI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
    
    &lt;ExtensionList&gt;
        &lt;Extension Id="com.photoshop.ai.panel" Version="1.0.0"/&gt;
    &lt;/ExtensionList&gt;
    
    &lt;ExecutionEnvironment&gt;
        &lt;HostList&gt;
            &lt;Host Name="PHXS" Version="16.0"/&gt;
            &lt;Host Name="PHSP" Version="16.0"/&gt;
        &lt;/HostList&gt;
        &lt;LocaleList&gt;
            &lt;Locale Code="All"/&gt;
        &lt;/LocaleList&gt;
        &lt;RequiredRuntimeList&gt;
            &lt;RequiredRuntime Name="CSXS" Version="7.0"/&gt;
        &lt;/RequiredRuntimeList&gt;
    &lt;/ExecutionEnvironment&gt;
    
    &lt;DispatchInfoList&gt;
        &lt;Extension Id="com.photoshop.ai.panel"&gt;
            &lt;DispatchInfo&gt;
                &lt;Resources&gt;
                    &lt;MainPath&gt;./index.html&lt;/MainPath&gt;
                    &lt;ScriptPath&gt;./js/photoshop.jsx&lt;/ScriptPath&gt;
                &lt;/Resources&gt;
                &lt;Lifecycle&gt;
                    &lt;AutoVisible&gt;true&lt;/AutoVisible&gt;
                &lt;/Lifecycle&gt;
                &lt;UI&gt;
                    &lt;Type&gt;Panel&lt;/Type&gt;
                    &lt;Menu&gt;Photoshop AI Assistant&lt;/Menu&gt;
                    &lt;Geometry&gt;
                        &lt;Size&gt;
                            &lt;Height&gt;600&lt;/Height&gt;
                            &lt;Width&gt;350&lt;/Width&gt;
                        &lt;/Size&gt;
                        &lt;MinSize&gt;
                            &lt;Height&gt;400&lt;/Height&gt;
                            &lt;Width&gt;300&lt;/Width&gt;
                        &lt;/MinSize&gt;
                    &lt;/Geometry&gt;
                    &lt;Icons&gt;
                        &lt;Icon Type="Normal"&gt;./icons/icon-normal.png&lt;/Icon&gt;
                        &lt;Icon Type="RollOver"&gt;./icons/icon-hover.png&lt;/Icon&gt;
                        &lt;Icon Type="DarkNormal"&gt;./icons/icon-dark.png&lt;/Icon&gt;
                        &lt;Icon Type="DarkRollOver"&gt;./icons/icon-dark-hover.png&lt;/Icon&gt;
                    &lt;/Icons&gt;
                &lt;/UI&gt;
            &lt;/DispatchInfo&gt;
        &lt;/Extension&gt;
    &lt;/DispatchInfoList&gt;
&lt;/ExtensionManifest&gt;
                </div>
            </div>

            <!-- HTML -->
            <div class="mb-8">
                <h3 class="text-lg font-semibold text-gray-800 mb-3">
                    <i class="fas fa-file-code text-orange-500 mr-2"></i>index.html
                </h3>
                <div class="code-block">
&lt;!DOCTYPE html&gt;
&lt;html lang="fr"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Photoshop AI Assistant&lt;/title&gt;
    &lt;link rel="stylesheet" href="css/style.css"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container"&gt;
        &lt;header class="app-header"&gt;
            &lt;h1&gt;🤖 AI Assistant&lt;/h1&gt;
            &lt;div class="status-indicator" id="statusIndicator"&gt;
                &lt;span class="status-dot"&gt;&lt;/span&gt;
                &lt;span id="statusText"&gt;Non connecté&lt;/span&gt;
            &lt;/div&gt;
        &lt;/header&gt;

        &lt;div class="config-section"&gt;
            &lt;h3&gt;⚙️ Configuration API&lt;/h3&gt;
            &lt;div class="form-group"&gt;
                &lt;label for="apiProvider"&gt;Fournisseur :&lt;/label&gt;
                &lt;select id="apiProvider"&gt;
                    &lt;option value="openrouter"&gt;OpenRouter&lt;/option&gt;
                    &lt;option value="google"&gt;Google Gemini&lt;/option&gt;
                &lt;/select&gt;
            &lt;/div&gt;
            &lt;div class="form-group"&gt;
                &lt;label for="apiKey"&gt;Clé API :&lt;/label&gt;
                &lt;input type="password" id="apiKey" placeholder="Entrez votre clé API"&gt;
            &lt;/div&gt;
            &lt;button id="saveConfig" class="btn btn-primary"&gt;💾 Sauvegarder&lt;/button&gt;
        &lt;/div&gt;

        &lt;div class="analysis-section"&gt;
            &lt;h3&gt;🔍 Analyse d'image&lt;/h3&gt;
            &lt;div class="image-info" id="imageInfo"&gt;
                &lt;p&gt;Aucune image sélectionnée&lt;/p&gt;
            &lt;/div&gt;
            &lt;button id="analyzeImage" class="btn btn-secondary" disabled&gt;
                🔍 Analyser l'image
            &lt;/button&gt;
        &lt;/div&gt;

        &lt;div class="results-section"&gt;
            &lt;h3&gt;📋 Résultats de l'analyse&lt;/h3&gt;
            &lt;div id="analysisResults" class="results-container"&gt;
                &lt;p class="placeholder"&gt;Les résultats d'analyse apparaîtront ici...&lt;/p&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;div class="actions-section"&gt;
            &lt;h3&gt;🎨 Actions suggérées&lt;/h3&gt;
            &lt;div id="suggestedActions" class="actions-container"&gt;
                &lt;p class="placeholder"&gt;Les suggestions apparaîtront après l'analyse...&lt;/p&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;div class="prompt-section"&gt;
            &lt;h3&gt;💬 Commande personnalisée&lt;/h3&gt;
            &lt;textarea id="customPrompt" placeholder="Décrivez ce que vous voulez faire avec cette image..."&gt;&lt;/textarea&gt;
            &lt;button id="executePrompt" class="btn btn-accent" disabled&gt;
                ✨ Exécuter
            &lt;/button&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;div id="loadingOverlay" class="loading-overlay"&gt;
        &lt;div class="spinner"&gt;&lt;/div&gt;
        &lt;p&gt;Traitement en cours...&lt;/p&gt;
    &lt;/div&gt;

    &lt;script src="js/CSInterface.js"&gt;&lt;/script&gt;
    &lt;script src="js/main.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
                </div>
            </div>

            <!-- CSS -->
            <div class="mb-8">
                <h3 class="text-lg font-semibold text-gray-800 mb-3">
                    <i class="fas fa-file-code text-pink-500 mr-2"></i>css/style.css
                </h3>
                <div class="code-block">
/* Reset et base */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #333;
    overflow-x: hidden;
}

.container {
    padding: 20px;
    max-width: 100%;
    height: 100vh;
    overflow-y: auto;
}

/* Header */
.app-header {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    text-align: center;
}

.app-header h1 {
    font-size: 24px;
    margin-bottom: 10px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.status-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-size: 14px;
}

.status-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: #ff4757;
    animation: pulse 2s infinite;
}

.status-dot.connected {
    background: #2ed573;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

/* Sections */
.config-section,
.analysis-section,
.results-section,
.actions-section,
.prompt-section {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

.config-section h3,
.analysis-section h3,
.results-section h3,
.actions-section h3,
.prompt-section h3 {
    font-size: 16px;
    margin-bottom: 15px;
    color: #444;
}

/* Form elements */
.form-group {
    margin-bottom: 15px;
}

.form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: 600;
    color: #555;
}

.form-group input,
.form-group select,
#customPrompt {
    width: 100%;
    padding: 12px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 14px;
    transition: all 0.3s ease;
}

.form-group input:focus,
.form-group select:focus,
#customPrompt:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

#customPrompt {
    min-height: 80px;
    resize: vertical;
    font-family: inherit;
}

/* Buttons */
.btn {
    padding: 12px 20px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.3s ease;
    width: 100%;
    margin-top: 10px;
}

.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.btn-primary {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
}

.btn-secondary {
    background: linear-gradient(135deg, #f093fb, #f5576c);
    color: white;
}

.btn-accent {
    background: linear-gradient(135deg, #4facfe, #00f2fe);
    color: white;
}

.btn:not(:disabled):hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

/* Image info */
.image-info {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
    font-size: 14px;
    color: #666;
}

/* Results */
.results-container,
.actions-container {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 15px;
    min-height: 100px;
    font-size: 14px;
    line-height: 1.6;
}

.placeholder {
    color: #999;
    font-style: italic;
    text-align: center;
    padding: 30px;
}

/* Loading overlay */
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    display: none;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    z-index: 1000;
}

.loading-overlay.active {
    display: flex;
}

.spinner {
    width: 40px;
    height: 40px;
    border: 4px solid rgba(255, 255, 255, 0.3);
    border-top: 4px solid #667eea;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 20px;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.loading-overlay p {
    color: white;
    font-size: 16px;
}

/* Action buttons */
.action-btn {
    background: #f8f9fa;
    border: 2px solid #e9ecef;
    border-radius: 8px;
    padding: 10px 15px;
    margin: 5px;
    cursor: pointer;
    display: inline-block;
    transition: all 0.3s ease;
    font-size: 13px;
}

.action-btn:hover {
    background: #667eea;
    color: white;
    border-color: #667eea;
}

/* Responsive */
@media (max-width: 400px) {
    .container {
        padding: 15px;
    }
    
    .app-header,
    .config-section,
    .analysis-section,
    .results-section,
    .actions-section,
    .prompt-section {
        padding: 15px;
    }
}
                </div>
            </div>

            <!-- JavaScript principal -->
            <div class="mb-8">
                <h3 class="text-lg font-semibold text-gray-800 mb-3">
                    <i class="fas fa-file-code text-yellow-500 mr-2"></i>js/main.js
                </h3>
                <div class="code-block">
// Variables globales
let csInterface;
let currentConfig = {
    provider: 'openrouter',
    apiKey: ''
};
let currentImageData = null;

// Initialisation
document.addEventListener('DOMContentLoaded', function() {
    // Initialiser CSInterface
    csInterface = new CSInterface();
    
    // Charger la configuration sauvegardée
    loadSavedConfig();
    
    // Écouter les événements Photoshop
    csInterface.addEventListener('com.photoshop.documentChanged', onDocumentChanged);
    
    // Attacher les événements
    attachEventListeners();
    
    // Vérifier l'état initial
    checkPhotoshopState();
});

function attachEventListeners() {
    // Configuration
    document.getElementById('saveConfig').addEventListener('click', saveConfiguration);
    document.getElementById('apiProvider').addEventListener('change', updateProvider);
    
    // Analyse
    document.getElementById('analyzeImage').addEventListener('click', analyzeCurrentImage);
    
    // Prompt personnalisé
    document.getElementById('executePrompt').addEventListener('click', executeCustomPrompt);
}

function loadSavedConfig() {
    const saved = localStorage.getItem('photoshop-ai-config');
    if (saved) {
        currentConfig = JSON.parse(saved);
        document.getElementById('apiProvider').value = currentConfig.provider;
        document.getElementById('apiKey').value = currentConfig.apiKey;
        updateConnectionStatus();
    }
}

function saveConfiguration() {
    const provider = document.getElementById('apiProvider').value;
    const apiKey = document.getElementById('apiKey').value.trim();
    
    if (!apiKey) {
        alert('Veuillez entrer une clé API valide');
        return;
    }
    
    currentConfig = { provider, apiKey };
    localStorage.setItem('photoshop-ai-config', JSON.stringify(currentConfig));
    
    updateConnectionStatus();
    checkButtons();
    
    showNotification('Configuration sauvegardée !', 'success');
}

function updateProvider() {
    const provider = document.getElementById('apiProvider').value;
    currentConfig.provider = provider;
}

function updateConnectionStatus() {
    const statusDot = document.querySelector('.status-dot');
    const statusText = document.getElementById('statusText');
    
    if (currentConfig.apiKey) {
        statusDot.classList.add('connected');
        statusText.textContent = `Connecté (${currentConfig.provider})`;
    } else {
        statusDot.classList.remove('connected');
        statusText.textContent = 'Non connecté';
    }
}

function checkPhotoshopState() {
    csInterface.evalScript('app.documents.length', function(result) {
        if (parseInt(result) > 0) {
            getActiveDocumentInfo();
        } else {
            updateImageInfo('Aucun document ouvert');
        }
    });
}

function onDocumentChanged() {
    checkPhotoshopState();
}

function getActiveDocumentInfo() {
    csInterface.evalScript('getDocumentInfo()', function(result) {
        try {
            const docInfo = JSON.parse(result);
            currentImageData = docInfo;
            updateImageInfo(`${docInfo.name} (${docInfo.width}x${docInfo.height}px)`);
            checkButtons();
        } catch (e) {
            updateImageInfo('Erreur lors de la lecture du document');
        }
    });
}

function updateImageInfo(text) {
    document.getElementById('imageInfo').innerHTML = `&lt;p&gt;${text}&lt;/p&gt;`;
}

function checkButtons() {
    const hasConfig = currentConfig.apiKey && currentConfig.provider;
    const hasImage = currentImageData !== null;
    
    document.getElementById('analyzeImage').disabled = !(hasConfig && hasImage);
    document.getElementById('executePrompt').disabled = !(hasConfig && hasImage);
}

function showLoading(show = true) {
    const overlay = document.getElementById('loadingOverlay');
    if (show) {
        overlay.classList.add('active');
    } else {
        overlay.classList.remove('active');
    }
}

function showNotification(message, type = 'info') {
    // Simple notification pour le moment
    alert(message);
}

function analyzeCurrentImage() {
    if (!currentImageData) {
        showNotification('Aucune image sélectionnée', 'error');
        return;
    }
    
    showLoading(true);
    
    // Exporter l'image en base64 pour l'analyse
    csInterface.evalScript('exportImageForAnalysis()', function(base64Data) {
        if (base64Data && base64Data !== 'null') {
            sendImageForAnalysis(base64Data);
        } else {
            showLoading(false);
            showNotification('Erreur lors de l\'export de l\'image', 'error');
        }
    });
}

async function sendImageForAnalysis(base64Data) {
    try {
        let analysisResult;
        
        if (currentConfig.provider === 'openrouter') {
            analysisResult = await analyzeWithOpenRouter(base64Data);
        } else {
            analysisResult = await analyzeWithGemini(base64Data);
        }
        
        displayAnalysisResults(analysisResult);
        generateSuggestedActions(analysisResult);
        
    } catch (error) {
        console.error('Erreur lors de l\'analyse:', error);
        showNotification('Erreur lors de l\'analyse: ' + error.message, 'error');
    } finally {
        showLoading(false);
    }
}

async function analyzeWithOpenRouter(base64Data) {
    const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
        method: 'POST',
        headers: {
            'Authorization': `Bearer ${currentConfig.apiKey}`,
            'Content-Type': 'application/json',
            'HTTP-Referer': 'https://photoshop-ai-extension.com',
            'X-Title': 'Photoshop AI Extension'
        },
        body: JSON.stringify({
            model: 'google/gemini-2.0-flash-exp:free',
            messages: [{
                role: 'user',
                content: [
                    {
                        type: 'text',
                        text: 'Analysez cette image en détail. Décrivez ce que vous voyez, identifiez les objets, personnes, problèmes potentiels, et suggérez des améliorations possibles pour la retouche photo.'
                    },
                    {
                        type: 'image_url',
                        image_url: {
                            url: `data:image/jpeg;base64,${base64Data}`
                        }
                    }
                ]
            }]
        })
    });
    
    if (!response.ok) {
        throw new Error(`Erreur OpenRouter: ${response.status}`);
    }
    
    const data = await response.json();
    return data.choices[0].message.content;
}

async function analyzeWithGemini(base64Data) {
    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${currentConfig.apiKey}`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            contents: [{
                parts: [
                    {
                        text: 'Analysez cette image en détail. Décrivez ce que vous voyez, identifiez les objets, personnes, problèmes potentiels, et suggérez des améliorations possibles pour la retouche photo.'
                    },
                    {
                        inline_data: {
                            mime_type: 'image/jpeg',
                            data: base64Data
                        }
                    }
                ]
            }]
        })
    });
    
    if (!response.ok) {
        throw new Error(`Erreur Gemini: ${response.status}`);
    }
    
    const data = await response.json();
    return data.candidates[0].content.parts[0].text;
}

function displayAnalysisResults(results) {
    const container = document.getElementById('analysisResults');
    container.innerHTML = `&lt;div class="analysis-text"&gt;${results.replace(/\n/g, '&lt;br&gt;')}&lt;/div&gt;`;
}

function generateSuggestedActions(analysisText) {
    const actions = [
        { label: '🎨 Améliorer les couleurs', action: 'enhanceColors' },
        { label: '✨ Réduire le bruit', action: 'reduceNoise' },
        { label: '🔆 Ajuster l\'exposition', action: 'adjustExposure' },
        { label: '🖼️ Recadrer intelligemment', action: 'smartCrop' },
        { label: '👤 Améliorer les portraits', action: 'enhancePortrait' }
    ];
    
    const container = document.getElementById('suggestedActions');
    container.innerHTML = actions.map(action =&gt; 
        `&lt;button class="action-btn" onclick="executeAction('${action.action}')"&gt;${action.label}&lt;/button&gt;`
    ).join('');
}

function executeAction(actionType) {
    showLoading(true);
    
    csInterface.evalScript(`executePhotoAction('${actionType}')`, function(result) {
        showLoading(false);
        if (result === 'success') {
            showNotification('Action exécutée avec succès !', 'success');
        } else {
            showNotification('Erreur lors de l\'exécution: ' + result, 'error');
        }
    });
}

async function executeCustomPrompt() {
    const prompt = document.getElementById('customPrompt').value.trim();
    if (!prompt) {
        showNotification('Veuillez entrer une commande', 'error');
        return;
    }
    
    showLoading(true);
    
    try {
        // Analyser le prompt pour déterminer l'action
        const actionPlan = await analyzePromptForAction(prompt);
        
        // Exécuter l'action planifiée
        csInterface.evalScript(`executeCustomAction('${actionPlan}')`, function(result) {
            showLoading(false);
            if (result === 'success') {
                showNotification('Commande exécutée avec succès !', 'success');
            } else {
                showNotification('Erreur: ' + result, 'error');
            }
        });
        
    } catch (error) {
        showLoading(false);
        showNotification('Erreur lors du traitement: ' + error.message, 'error');
    }
}

async function analyzePromptForAction(prompt) {
    // Ici on pourrait faire appel à l'IA pour interpréter le prompt
    // Pour l'instant, retournons le prompt tel quel
    return prompt;
}
                </div>
            </div>

            <!-- JSX Photoshop -->
            <div class="mb-8">
                <h3 class="text-lg font-semibold text-gray-800 mb-3">
                    <i class="fas fa-file-code text-indigo-500 mr-2"></i>js/photoshop.jsx
                </h3>
                <div class="code-block">
// Script JSX pour Photoshop - Communication avec l'extension CEP

// Fonction pour obtenir les informations du document actif
function getDocumentInfo() {
    try {
        if (app.documents.length === 0) {
            return JSON.stringify({error: "Aucun document ouvert"});
        }
        
        var doc = app.activeDocument;
        var info = {
            name: doc.name,
            width: doc.width.as('px'),
            height: doc.height.as('px'),
            colorMode: doc.mode.toString(),
            resolution: doc.resolution,
            layers: doc.layers.length
        };
        
        return JSON.stringify(info);
    } catch (e) {
        return JSON.stringify({error: e.toString()});
    }
}

// Fonction pour exporter l'image pour analyse
function exportImageForAnalysis() {
    try {
        if (app.documents.length === 0) {
            return null;
        }
        
        var doc = app.activeDocument;
        var tempFile = new File(Folder.temp + "/ai_analysis_temp.jpg");
        
        // Options d'export JPEG
        var jpegOptions = new JPEGSaveOptions();
        jpegOptions.quality = 8;
        jpegOptions.embedColorProfile = true;
        jpegOptions.formatOptions = FormatOptions.STANDARDBASELINE;
        jpegOptions.matte = MatteType.WHITE;
        
        // Sauvegarder temporairement
        doc.saveAs(tempFile, jpegOptions, true, Extension.LOWERCASE);
        
        // Lire le fichier et le convertir en base64
        tempFile.open("r");
        tempFile.encoding = "BINARY";
        var content = tempFile.read();
        tempFile.close();
        
        // Nettoyer le fichier temporaire
        tempFile.remove();
        
        // Convertir en base64 (fonction personnalisée)
        return base64Encode(content);
        
    } catch (e) {
        return JSON.stringify({error: e.toString()});
    }
}

// Fonction pour encoder en base64 (implémentation simple)
function base64Encode(data) {
    var chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    var result = "";
    var i = 0;
    
    while (i < data.length) {
        var a = data.charCodeAt(i++);
        var b = i < data.length ? data.charCodeAt(i++) : 0;
        var c = i < data.length ? data.charCodeAt(i++) : 0;
        
        var bitmap = (a << 16) | (b << 8) | c;
        
        result += chars.charAt((bitmap >> 18) & 63);
        result += chars.charAt((bitmap >> 12) & 63);
        result += i - 2 < data.length ? chars.charAt((bitmap >> 6) & 63) : "=";
        result += i - 1 < data.length ? chars.charAt(bitmap & 63) : "=";
    }
    
    return result;
}

// Fonction pour exécuter des actions de retouche prédéfinies
function executePhotoAction(actionType) {
    try {
        if (app.documents.length === 0) {
            return "Aucun document ouvert";
        }
        
        var doc = app.activeDocument;
        
        switch (actionType) {
            case 'enhanceColors':
                enhanceColors(doc);
                break;
                
            case 'reduceNoise':
                reduceNoise(doc);
                break;
                
            case 'adjustExposure':
                adjustExposure(doc);
                break;
                
            case 'smartCrop':
                smartCrop(doc);
                break;
                
            case 'enhancePortrait':
                enhancePortrait(doc);
                break;
                
            default:
                return "Action non reconnue: " + actionType;
        }
        
        return "success";
        
    } catch (e) {
        return "Erreur: " + e.toString();
    }
}

// Actions spécifiques de retouche
function enhanceColors(doc) {
    // Auto Color
    var autoColorAction = new ActionDescriptor();
    executeAction(charIDToTypeID('AtCl'), autoColorAction, DialogModes.NO);
    
    // Vibrance +20
    var vibranceLayer = doc.artLayers.add();
    vibranceLayer.blendMode = BlendMode.NORMAL;
    
    var vibranceDesc = new ActionDescriptor();
    var vibranceAdjDesc = new ActionDescriptor();
    vibranceAdjDesc.putInteger(charIDToTypeID('Vbnc'), 20);
    vibranceDesc.putObject(charIDToTypeID('Type'), charIDToTypeID('Vbnc'), vibranceAdjDesc);
    executeAction(charIDToTypeID('AdjL'), vibranceDesc, DialogModes.NO);
}

function reduceNoise(doc) {
    // Réduction du bruit via filtre
    try {
        var noiseDesc = new ActionDescriptor();
        noiseDesc.putInteger(charIDToTypeID('Amnt'), 6);
        noiseDesc.putInteger(charIDToTypeID('Rds '), 1);
        noiseDesc.putInteger(charIDToTypeID('Dtl '), 50);
        executeAction(stringIDToTypeID('noiseReduction'), noiseDesc, DialogModes.NO);
    } catch (e) {
        // Fallback: Flou gaussien léger
        doc.activeLayer.applyGaussianBlur(0.5);
    }
}

function adjustExposure(doc) {
    // Auto Tone
    var autoToneAction = new ActionDescriptor();
    executeAction(charIDToTypeID('AtTn'), autoToneAction, DialogModes.NO);
    
    // Légère correction d'exposition
    var exposureDesc = new ActionDescriptor();
    var exposureAdjDesc = new ActionDescriptor();
    exposureAdjDesc.putDouble(charIDToTypeID('Exps'), 0.3);
    exposureAdjDesc.putDouble(charIDToTypeID('Ofst'), 0.0);
    exposureAdjDesc.putDouble(charIDToTypeID('gamm'), 1.0);
    exposureDesc.putObject(charIDToTypeID('Type'), charIDToTypeID('Exps'), exposureAdjDesc);
    executeAction(charIDToTypeID('AdjL'), exposureDesc, DialogModes.NO);
}

function smartCrop(doc) {
    // Recadrage basé sur la règle des tiers
    var width = doc.width.as('px');
    var height = doc.height.as('px');
    
    var cropWidth = Math.min(width, height * 1.5);
    var cropHeight = Math.min(height, width / 1.5);
    
    var startX = (width - cropWidth) / 2;
    var startY = (height - cropHeight) / 2;
    
    var cropBounds = [
        UnitValue(startX, 'px'),
        UnitValue(startY, 'px'),
        UnitValue(startX + cropWidth, 'px'),
        UnitValue(startY + cropHeight, 'px')
    ];
    
    doc.crop(cropBounds);
}

function enhancePortrait(doc) {
    // Amélioration peau (flou de surface)
    try {
        var surfaceBlurDesc = new ActionDescriptor();
        surfaceBlurDesc.putUnitDouble(charIDToTypeID('Rds '), charIDToTypeID('#Pxl'), 2);
        surfaceBlurDesc.putInteger(charIDToTypeID('Thsh'), 15);
        executeAction(charIDToTypeID('SrfB'), surfaceBlurDesc, DialogModes.NO);
        
        // Réduire l'opacité pour un effet naturel
        doc.activeLayer.opacity = 60;
    } catch (e) {
        // Fallback: amélioration des couleurs
        enhanceColors(doc);
    }
}

// Fonction pour exécuter des actions personnalisées basées sur du texte
function executeCustomAction(actionPlan) {
    try {
        if (app.documents.length === 0) {
            return "Aucun document ouvert";
        }
        
        var doc = app.activeDocument;
        var plan = actionPlan.toLowerCase();
        
        // Analyse simple du texte pour déterminer l'action
        if (plan.indexOf('couleur') != -1 || plan.indexOf('saturation') != -1) {
            enhanceColors(doc);
        } else if (plan.indexOf('luminosité') != -1 || plan.indexOf('exposition') != -1) {
            adjustExposure(doc);
        } else if (plan.indexOf('flou') != -1 || plan.indexOf('netteté') != -1) {
            // Masque de netteté
            doc.activeLayer.applyUnsharpMask(50, 1.0, 0);
        } else if (plan.indexOf('contraste') != -1) {
            // Auto Contrast
            var autoContrastAction = new ActionDescriptor();
            executeAction(charIDToTypeID('AtCt'), autoContrastAction, DialogModes.NO);
        } else {
            // Action par défaut : amélioration générale
            enhanceColors(doc);
            adjustExposure(doc);
        }
        
        return "success";
        
    } catch (e) {
        return "Erreur: " + e.toString();
    }
}

// Fonction utilitaire pour créer un calque de réglage
function createAdjustmentLayer(type) {
    var desc = new ActionDescriptor();
    var ref = new ActionReference();
    ref.putClass(charIDToTypeID('AdjL'));
    desc.putReference(charIDToTypeID('null'), ref);
    
    var adjDesc = new ActionDescriptor();
    adjDesc.putClass(charIDToTypeID('Type'), type);
    desc.putObject(charIDToTypeID('Usng'), charIDToTypeID('AdjL'), adjDesc);
    
    executeAction(charIDToTypeID('Mk  '), desc, DialogModes.NO);
    return app.activeDocument.activeLayer;
}

// Fonction pour sauvegarder l'état actuel (historique)
function saveState(stateName) {
    try {
        var desc = new ActionDescriptor();
        desc.putString(charIDToTypeID('Nm  '), stateName || "État IA");
        executeAction(charIDToTypeID('SnpS'), desc, DialogModes.NO);
        return "success";
    } catch (e) {
        return "Erreur sauvegarde: " + e.toString();
    }
}
                </div>
            </div>

            <!-- CSInterface.js info -->
            <div class="mb-8">
                <h3 class="text-lg font-semibold text-gray-800 mb-3">
                    <i class="fas fa-download text-green-500 mr-2"></i>js/CSInterface.js
                </h3>
                <div class="success-box">
                    <div class="flex items-center mb-2">
                        <i class="fas fa-info-circle text-green-500 mr-2"></i>
                        <strong>Fichier à télécharger</strong>
                    </div>
                    <p>Le fichier <code>CSInterface.js</code> est la bibliothèque officielle d'Adobe pour les extensions CEP. Il doit être téléchargé depuis :</p>
                    <div class="mt-3">
                        <strong>Lien de téléchargement :</strong><br>
                        <a href="https://github.com/Adobe-CEP/CEP-Resources/raw/master/CEP_11.x/CSInterface.js" class="text-blue-600 underline">
                            https://github.com/Adobe-CEP/CEP-Resources/raw/master/CEP_11.x/CSInterface.js
                        </a>
                    </div>
                    <p class="mt-2 text-sm text-gray-600">Placez ce fichier dans le dossier <code>js/</code> de votre extension.</p>
                </div>
            </div>
        </div>

        <!-- Instructions d'installation -->
        <div class="bg-white rounded-lg shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                <i class="fas fa-download text-blue-500 mr-2"></i>Instructions d'installation
            </h2>

            <div class="step-box">
                <h3 class="font-semibold text-gray-800 mb-2">
                    <i class="fas fa-folder text-blue-500 mr-2"></i>Étape 1 : Créer la structure de dossiers
                </h3>
                <ol class="list-decimal list-inside space-y-2 text-gray-700">
                    <li>Ouvrez l'Explorateur Windows ou le Finder (Mac)</li>
                    <li>Naviguez vers le dossier CEP de votre système :
                        <ul class="list-disc list-inside ml-6 mt-2 space-y-1">
                            <li><strong>Windows :</strong> <span class="highlight-path">C:\Program Files (x86)\Common Files\Adobe\CEP\extensions\</span></li>
                            <li><strong>macOS :</strong> <span class="highlight-path">/Library/Application Support/Adobe/CEP/extensions/</span></li>
                        </ul>
                    </li>
                    <li>Créez un nouveau dossier nommé <strong>"PhotoshopAI"</strong></li>
                    <li>Dans ce dossier, créez la structure complète montrée dans l'arborescence ci-dessus</li>
                </ol>
            </div>

            <div class="step-box">
                <h3 class="font-semibold text-gray-800 mb-2">
                    <i class="fas fa-file-code text-green-500 mr-2"></i>Étape 2 : Copier les fichiers de code
                </h3>
                <ol class="list-decimal list-inside space-y-2 text-gray-700">
                    <li>Créez chaque fichier avec son contenu respectif (voir les codes ci-dessus)</li>
                    <li>Respectez exactement les noms de fichiers et l'arborescence</li>
                    <li>Téléchargez <code>CSInterface.js</code> depuis le lien GitHub fourni</li>
                    <li>Créez les icônes (23x23px) ou utilisez des icônes temporaires</li>
                </ol>
            </div>

            <div class="step-box">
                <h3 class="font-semibold text-gray-800 mb-2">
                    <i class="fas fa-key text-yellow-500 mr-2"></i>Étape 3 : Activer le mode développeur
                </h3>
                <ol class="list-decimal list-inside space-y-2 text-gray-700">
                    <li>Ouvrez l'Éditeur de Registre Windows (regedit) ou Terminal Mac</li>
                    <li><strong>Windows :</strong> Naviguez vers <code>HKEY_CURRENT_USER\Software\Adobe\CSXS.11</code></li>
                    <li>Créez une nouvelle valeur DWORD nommée <code>PlayerDebugMode</code> avec la valeur <code>1</code></li>
                    <li><strong>macOS :</strong> Exécutez la commande :<br>
                        <code class="bg-gray-100 px-2 py-1 rounded">defaults write com.adobe.CSXS.11 PlayerDebugMode 1</code>
                    </li>
                </ol>
            </div>

            <div class="step-box">
                <h3 class="font-semibold text-gray-800 mb-2">
                    <i class="fas fa-rocket text-purple-500 mr-2"></i>Étape 4 : Lancer l'extension
                </h3>
                <ol class="list-decimal list-inside space-y-2 text-gray-700">
                    <li>Redémarrez Adobe Photoshop</li>
                    <li>Allez dans <strong>Fenêtre → Extensions → Photoshop AI Assistant</strong></li>
                    <li>L'extension devrait s'ouvrir dans un panneau</li>
                    <li>Configurez votre clé API dans la section Configuration</li>
                </ol>
            </div>
        </div>

        <!-- Configuration des APIs -->
        <div class="bg-white rounded-lg shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                <i class="fas fa-cog text-orange-500 mr-2"></i>Configuration des APIs
            </h2>

            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-semibold text-gray-800 mb-3">
                        <i class="fab fa-openid text-blue-500 mr-2"></i>OpenRouter
                    </h3>
                    <ol class="list-decimal list-inside space-y-2 text-gray-700 text-sm">
                        <li>Visitez <a href="https://openrouter.ai" class="text-blue-600 underline">openrouter.ai</a></li>
                        <li>Créez un compte gratuit</li>
                        <li>Allez dans "API Keys"</li>
                        <li>Générez une nouvelle clé</li>
                        <li>Copiez la clé dans l'extension</li>
                    </ol>
                    <div class="bg-blue-50 p-3 rounded mt-3">
                        <p class="text-sm text-blue-800">
                            <strong>Avantage :</strong> Donne accès à plusieurs modèles IA, y compris Gemini gratuitement
                        </p>
                    </div>
                </div>

                <div>
                    <h3 class="font-semibold text-gray-800 mb-3">
                        <i class="fab fa-google text-red-500 mr-2"></i>Google Gemini
                    </h3>
                    <ol class="list-decimal list-inside space-y-2 text-gray-700 text-sm">
                        <li>Visitez <a href="https://makersuite.google.com" class="text-blue-600 underline">Google AI Studio</a></li>
                        <li>Connectez-vous avec votre compte Google</li>
                        <li>Cliquez sur "Get API Key"</li>
                        <li>Créez un nouveau projet</li>
                        <li>Générez la clé API</li>
                    </ol>
                    <div class="bg-red-50 p-3 rounded mt-3">
                        <p class="text-sm text-red-800">
                            <strong>Avantage :</strong> API directe Google, très performante pour l'analyse d'images
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Utilisation -->
        <div class="bg-white rounded-lg shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                <i class="fas fa-play text-green-500 mr-2"></i>Comment utiliser l'extension
            </h2>

            <div class="space-y-6">
                <div class="border-l-4 border-blue-500 pl-4">
                    <h3 class="font-semibold text-gray-800 mb-2">1. Configuration initiale</h3>
                    <p class="text-gray-600">Sélectionnez votre fournisseur API (OpenRouter ou Google Gemini) et entrez votre clé API. Sauvegardez la configuration.</p>
                </div>

                <div class="border-l-4 border-green-500 pl-4">
                    <h3 class="font-semibold text-gray-800 mb-2">2. Ouvrir une image</h3>
                    <p class="text-gray-600">Ouvrez n'importe quelle image dans Photoshop. L'extension détectera automatiquement l'image active.</p>
                </div>

                <div class="border-l-4 border-purple-500 pl-4">
                    <h3 class="font-semibold text-gray-800 mb-2">3. Analyser l'image</h3>
                    <p class="text-gray-600">Cliquez sur "Analyser l'image" pour obtenir une analyse détaillée par l'IA. Les résultats apparaîtront avec des suggestions d'amélioration.</p>
                </div>

                <div class="border-l-4 border-orange-500 pl-4">
                    <h3 class="font-semibold text-gray-800 mb-2">4. Appliquer les retouches</h3>
                    <p class="text-gray-600">Utilisez les boutons d'actions suggérées ou entrez une commande personnalisée dans la zone de texte pour des retouches spécifiques.</p>
                </div>
            </div>
        </div>

        <!-- Dépannage -->
        <div class="bg-white rounded-lg shadow-lg p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                <i class="fas fa-wrench text-red-500 mr-2"></i>Dépannage
            </h2>

            <div class="space-y-4">
                <div class="warning-box">
                    <h3 class="font-semibold mb-2">❌ L'extension n'apparaît pas dans Photoshop</h3>
                    <ul class="list-disc list-inside space-y-1 text-sm">
                        <li>Vérifiez que le mode développeur est activé (PlayerDebugMode = 1)</li>
                        <li>Contrôlez l'arborescence des dossiers</li>
                        <li>Redémarrez Photoshop complètement</li>
                        <li>Vérifiez les permissions du dossier CEP</li>
                    </ul>
                </div>

                <div class="warning-box">
                    <h3 class="font-semibold mb-2">🔑 Erreurs d'API</h3>
                    <ul class="list-disc list-inside space-y-1 text-sm">
                        <li>Vérifiez que votre clé API est correcte</li>
                        <li>Contrôlez votre connexion internet</li>
                        <li>Assurez-vous d'avoir des crédits API disponibles</li>
                        <li>Testez avec l'autre fournisseur d'API</li>
                    </ul>
                </div>

                <div class="warning-box">
                    <h3 class="font-semibold mb-2">🖼️ Problèmes d'analyse d'image</h3>
                    <ul class="list-disc list-inside space-y-1 text-sm">
                        <li>Assurez-vous que l'image est ouverte et active</li>
                        <li>Vérifiez que l'image n'est pas trop volumineuse (> 10MB)</li>
                        <li>Essayez avec une image plus simple d'abord</li>
                        <li>Regardez la console de développement pour les erreurs</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="bg-gradient-to-r from-gray-800 to-gray-900 text-white p-8 rounded-lg">
            <h2 class="text-xl font-bold mb-4">
                <i class="fas fa-rocket mr-2"></i>Votre extension est prête !
            </h2>
            <p class="mb-4">
                Vous disposez maintenant d'une extension CEP complète pour intégrer l'IA dans Photoshop. 
                Cette extension est extensible et peut être personnalisée selon vos besoins.
            </p>
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-semibold mb-2">🚀 Prochaines étapes</h3>
                    <ul class="text-sm space-y-1 opacity-90">
                        <li>• Testez avec différents types d'images</li>
                        <li>• Personnalisez les actions de retouche</li>
                        <li>• Ajoutez de nouvelles fonctionnalités</li>
                        <li>• Partagez avec d'autres utilisateurs</li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold mb-2">💡 Idées d'amélioration</h3>
                    <ul class="text-sm space-y-1 opacity-90">
                        <li>• Interface utilisateur plus avancée</li>
                        <li>• Support de plus d'APIs IA</li>
                        <li>• Préréglages de retouche sauvegardés</li>
                        <li>• Traitement par lots</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDsKWG6gEB73k3IUgMzFJdEC8jBt1GETYpE8cm70Qqd%2FpdOQvZvotQQ59%2BuoZ%2Bc%2Bwe1FxW1wGI8569xQdbCb3CWjv9HdGgOXRxpR6zUuxi%2Buz71vC70vf%2BaoRnMAk5Pe%2FF9GlXoZclryaR2S8gU24NqMVdvWzoY3A6ZoJG9cPKUNDNYv6SpxUUM35e0tSMYfizsvRKPHNVbsJSgcaTD4vPqQ2Fh5r0cOYStfsdddnNv0NuGtvjfzj%2F6CpddL4PIg%2B3l6aL88Cww74xy0eKlqk7eIPx%2Fz5elcV%2BKEJTSqXo45cF8PeWDgjcpMXfX1NTgsHXWHNOaR4PLFOIACQ0VYwWKnYzp2T5%2FNujjt8MMnQVd6TQOOo1R8WuOevQT8xG2kfM7%2Br41xRPS1br6%2FubIHhCd2aqqKF%2BaOZvbnUpGzMipdBzhUd8sgarwFsVn9uQXsJKNtCrR2i4Z%2B%2BG%2BBEMsyezyRmmWH3uZCYVt%2FKlwN0I1TiPQLzAJgKX7uH3BnX4zjSYiMDaXl3NKKU%2FtMIvhGuEr8%3D";
        window.__genspark_locale = "fr-FR";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDsKWG6gEB73k3IUgMzFJdEC8jBt1GETYpE8cm70Qqd/pdOQvZvotQQ59+uoZ+c+we1FxW1wGI8569xQdbCb3CWjv9HdGgOXRxpR6zUuxi+uz71vC70vf+aoRnMAk5Pe/F9GlXoZclryaR2S8gU24NqMVdvWzoY3A6ZoJG9cPKUNDNYv6SpxUUM35e0tSMYfizsvRKPHNVbsJSgcaTD4vPqQ2Fh5r0cOYStfsdddnNv0NuGtvjfzj/6CpddL4PIg+3l6aL88Cww74xy0eKlqk7eIPx/z5elcV+KEJTSqXo45cF8PeWDgjcpMXfX1NTgsHXWHNOaR4PLFOIACQ0VYwWKnYzp2T5/Nujjt8MMnQVd6TQOOo1R8WuOevQT8xG2kfM7+r41xRPS1br6/ubIHhCd2aqqKF+aOZvbnUpGzMipdBzhUd8sgarwFsVn9uQXsJKNtCrR2i4Z++G+BEMsyezyRmmWH3uZCYVt/KlwN0I1TiPQLzAJgKX7uH3BnX4zjSYiMDaXl3NKKU/tMIvhGuEr8=";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    